{"version":3,"sources":["redux/auth/auth-operations.js","redux/contacts/contacts-reducer.js","redux/auth/auth-reducer.js","redux/store.js","redux/auth/auth-selectors.js","components/Navigation/Navigation.jsx","components/UserMenu/UserMenu.jsx","components/AuthNav/AuthNav.jsx","components/AppBar/AppBar.jsx","components/Container/Container.jsx","components/PrivateRoute.jsx","components/PublicRoute.jsx","components/App/App.jsx","index.js","components/Navigation/Navigation.module.css","redux/contacts/contacts-types.js","components/AuthNav/AuthNav.module.css","components/UserMenu/UserMenu.module.css","redux/contacts/contacts-actions.js","components/AppBar/AppBar.module.css","components/Container/Container.module.css","services/api.js","redux/contacts/contacts-operations.js"],"names":["axios","defaults","baseURL","token","headers","common","Authorization","register","createAsyncThunk","credentials","thunkAPI","a","post","data","rejectWithValue","logIn","logOut","_","fetchCurrentUser","persistedToken","getState","auth","get","items","createReducer","fetchContacts","fulfilled","payload","addContact","state","deleteContact","filter","id","filterContact","loading","pending","rejected","error","console","log","combineReducers","initialState","user","name","email","isLoader","isLoggedIn","authSlice","createSlice","extraReducers","action","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","persistReducer","authReducer","contacts","contactsReducer","devTools","process","persistor","persistStore","authSelectors","getIsLoggedIn","getLoading","getUsername","getIsFetchingCurrent","isFetchingCurrentUser","Navigation","useSelector","className","s","navList","navItem","to","exact","navLink","activeClassName","navLinkActive","UserMenu","dispatch","useDispatch","thumb","titleThumb","title","Fab","variant","size","type","onClick","AuthNav","link","activeLink","AppBar","header","Container","children","container","PrivateRoute","redirectTo","routeProps","PublicRoute","restricted","shouldRedirect","HomePage","lazy","RegisterPage","LoginPage","ContactsPage","App","useEffect","fallback","path","ReactDOM","render","StrictMode","document","getElementById","module","exports","ADD","DELETE","FETCH","FILTER","createAction","number","delete","_value","contactsAPI","message","contact"],"mappings":"2UAGAA,IAAMC,SAASC,QAAU,wCAEzB,IAAMC,EAAQ,SACRA,GACFH,IAAMC,SAASG,QAAQC,OAAOC,cAA9B,iBAAwDH,IAFtDA,EAAQ,WAKVH,IAAMC,SAASG,QAAQC,OAAOC,cAAgB,IAIrCC,EAAWC,YACtB,gBADsC,uCAEtC,WAAOC,EAAaC,GAApB,iBAAAC,EAAA,+EAE2BX,IAAMY,KAAK,gBAAiBH,GAFvD,uBAEYI,EAFZ,EAEYA,KACRV,EAAUU,EAAKV,OAHnB,kBAIWU,GAJX,yDAMWH,EAASI,mBANpB,yDAFsC,yDAa3BC,EAAQP,YACnB,aADmC,uCAEnC,WAAOC,EAAaC,GAApB,iBAAAC,EAAA,+EAE2BX,IAAMY,KAAK,eAAgBH,GAFtD,uBAEYI,EAFZ,EAEYA,KACRV,EAAUU,EAAKV,OAHnB,kBAIWU,GAJX,yDAMWH,EAASI,mBANpB,yDAFmC,yDAaxBE,EAASR,YAAiB,cAAD,uCAAgB,WAAOS,EAAGP,GAAV,SAAAC,EAAA,+EAE5CX,IAAMY,KAAK,iBAFiC,OAGlDT,IAHkD,wEAK3CO,EAASI,mBALkC,wDAAhB,yDASzBI,EAAmBV,YAC9B,wBAD8C,uCAE9C,WAAOS,EAAGP,GAAV,mBAAAC,EAAA,sEAEUQ,EAAiBT,EAASU,WAAWC,KAAKlB,MAChDA,EAAUgB,GAHd,SAI2BnB,IAAMsB,IAAI,kBAJrC,uBAIYT,EAJZ,EAIYA,KAJZ,kBAKWA,GALX,2DAOWH,EAASI,mBAPpB,0DAF8C,0D,yMCtC1CS,EAAQC,YAFU,IAEG,mBACxBC,IAAcC,WAAY,SAACT,EAAD,YAAMU,WADR,cAGxBC,IAAWF,WAAY,SAACG,EAAD,OAAUF,EAAV,EAAUA,QAAV,4BAA4BE,GAA5B,CAAmCF,OAHlC,cAKxBG,IAAcJ,WAAY,SAACG,EAAD,OAAUF,EAAV,EAAUA,QAAV,OACzBE,EAAME,QAAO,qBAAGC,KAAgBL,QANT,IASrBI,EAASP,YAAc,GAAD,eACzBS,KAAgB,SAAChB,EAAD,YAAMU,YAGnBO,EAAUV,aAAc,GAAD,mBAC1BC,IAAcU,SAAU,kBAAM,KADJ,cAE1BV,IAAcC,WAAY,kBAAM,KAFN,cAG1BD,IAAcW,UAAW,kBAAM,KAHL,cAK1BR,IAAWO,SAAU,kBAAM,KALD,cAM1BP,IAAWF,WAAY,kBAAM,KANH,cAO1BE,IAAWQ,UAAW,kBAAM,KAPF,cAS1BN,IAAcK,SAAU,kBAAM,KATJ,cAU1BL,IAAcJ,WAAY,kBAAM,KAVN,cAW1BI,IAAcM,UAAW,kBAAM,KAXL,IAcvBC,EAAQb,YAAc,MAAD,mBACxBC,IAAcW,UAAW,SAAAC,GAAK,OAAIC,QAAQC,IAAIF,MADtB,cAExBZ,IAAcU,SAAU,kBAAM,QAFN,cAGxBP,IAAWQ,UAAW,SAAAC,GAAK,OAAIC,QAAQC,IAAIF,MAHnB,cAIxBT,IAAWO,SAAU,kBAAM,QAJH,cAKxBL,IAAcM,UAAW,SAAAC,GAAK,OAAIC,QAAQC,IAAIF,MALtB,cAMxBP,IAAcK,SAAU,kBAAM,QANN,IASZK,cAAgB,CAC7BjB,QACAQ,SACAG,UACAG,U,gBChDII,EAAe,CACnBC,KAAM,CAAEC,KAAM,KAAMC,MAAO,MAC3BC,UAAU,EACV1C,MAAO,KACP2C,YAAY,EACZT,OAAO,GA8DMU,EA3DGC,YAAY,CAC5BL,KAAM,OACNF,eACAQ,eAAa,mBACV1C,IAASmB,WADC,SACUG,EAAOqB,GAC1BrB,EAAMa,KAAOQ,EAAOvB,QAAQe,KAC5Bb,EAAM1B,MAAQ+C,EAAOvB,QAAQxB,MAC7B0B,EAAMgB,UAAW,EACjBhB,EAAMiB,YAAa,KALV,cAOVvC,IAAS4B,SAPC,SAOQN,GACjBA,EAAMgB,UAAW,EACjBhB,EAAMQ,OAAQ,KATL,cAWV9B,IAAS6B,UAXC,SAWSP,GACb,2BAAQY,GAAR,IAAsBJ,OAAO,OAZzB,cAcVtB,IAAMW,WAdI,SAcOG,EAAOqB,GACvBrB,EAAMa,KAAOQ,EAAOvB,QAAQe,KAC5Bb,EAAM1B,MAAQ+C,EAAOvB,QAAQxB,MAC7B0B,EAAMgB,UAAW,EACjBhB,EAAMiB,YAAa,KAlBV,cAoBV/B,IAAMoB,SApBI,SAoBKN,GACdA,EAAMgB,UAAW,EACjBhB,EAAMQ,OAAQ,KAtBL,cAwBVtB,IAAMqB,UAxBI,SAwBMP,GACV,2BAAQY,GAAR,IAAsBJ,OAAO,OAzBzB,cA2BVrB,IAAOU,WA3BG,SA2BQG,GACjBA,EAAMa,KAAO,CAAEC,KAAM,KAAMC,MAAO,MAClCf,EAAM1B,MAAQ,KACd0B,EAAMiB,YAAa,EACnBjB,EAAMgB,UAAW,KA/BR,cAiCV7B,IAAOmB,SAjCG,SAiCMN,GACfA,EAAMQ,OAAQ,KAlCL,cAoCVrB,IAAOoB,UApCG,SAoCOP,GAChBA,EAAMQ,OAAQ,EACdR,EAAMgB,UAAW,KAtCR,cAwCV3B,IAAiBQ,WAxCP,SAwCkBG,EAAOqB,GAClCrB,EAAMa,KAAN,eAAkBQ,EAAOvB,SACzBE,EAAMiB,YAAa,EACnBjB,EAAMgB,UAAW,KA3CR,cA6CV3B,IAAiBiB,SA7CP,SA6CgBN,GACzBA,EAAMQ,OAAQ,EACdR,EAAMgB,UAAW,KA/CR,cAiDV3B,IAAiBkB,UAjDP,SAiDiBP,GAC1BA,EAAMQ,OAAQ,EACdR,EAAMgB,UAAW,KAnDR,KAwDf,QCvDMM,EAAU,YACXC,YAAqB,CACtBC,kBAAmB,CACjBC,eAAgB,CAACC,IAAOC,IAAWC,IAAOC,IAASC,IAAOC,SAK1DC,EAAoB,CACxBC,IAAK,OACLC,YACAC,UAAW,CAAC,UAGDC,EAAQC,YAAe,CAClCC,QAAS,CACP9C,KAAM+C,YAAeP,EAAmBQ,GACxCC,SAAUC,GAEZpB,aACAqB,UAAUC,IAGCC,EAAYC,YAAaV,G,OC3BvBW,EANO,CACpBC,cANoB,SAAAhD,GAAK,OAAIA,EAAMR,KAAKyB,YAOxCgC,WANiB,SAAAjD,GAAK,OAAIA,EAAMR,KAAKwB,UAOrCkC,YANkB,SAAAlD,GAAK,OAAIA,EAAMR,KAAKqB,KAAKC,MAO3CqC,qBAN2B,SAAAnD,GAAK,OAAIA,EAAMR,KAAK4D,wB,wBCGlC,SAASC,IACtB,IAAMpC,EAAaqC,YAAYP,EAAcC,eAC7C,OACE,qBAAIO,UAAWC,IAAEC,QAAjB,UACE,oBAAIF,UAAWC,IAAEE,QAAjB,SACE,cAAC,IAAD,CACEC,GAAG,IACHC,OAAK,EACLL,UAAWC,IAAEK,QACbC,gBAAiBN,IAAEO,cAJrB,wBAUD9C,GACC,oBAAIsC,UAAWC,IAAEE,QAAjB,SACE,cAAC,IAAD,CACEC,GAAG,YACHC,OAAK,EACLL,UAAWC,IAAEK,QACbC,gBAAiBN,IAAEO,cAJrB,4B,gECdK,SAASC,IACtB,IAAMC,EAAWC,cACXpD,EAAOwC,YAAYP,EAAcG,aAEvC,OACE,sBAAKK,UAAWC,IAAEW,MAAlB,UACE,sBAAKZ,UAAWC,IAAEY,WAAlB,UACE,cAAC,IAAD,IACA,uBAAMb,UAAWC,IAAEa,MAAnB,sBAAoCvD,QAEtC,eAACwD,EAAA,EAAD,CACEC,QAAQ,WACRC,KAAK,QACLC,KAAK,SACLC,QAAS,kBAAMT,EAAS9E,gBAJ1B,UAME,cAAC,IAAD,IANF,gB,qBCfS,SAASwF,IACtB,OACE,gCACE,cAAC,IAAD,CACEhB,GAAG,YACHC,OAAK,EACLL,UAAWC,IAAEoB,KACbd,gBAAiBN,IAAEqB,WAJrB,0BAQA,cAAC,IAAD,CACElB,GAAG,SACHC,OAAK,EACLL,UAAWC,IAAEoB,KACbd,gBAAiBN,IAAEqB,WAJrB,uB,sBCRS,SAASC,KACtB,IAAM7D,EAAaqC,YAAYP,EAAcC,eAC7C,OACE,yBAAQO,UAAWC,KAAEuB,OAArB,UACE,cAAC1B,EAAD,IACCpC,EAAa,cAAC+C,EAAD,IAAe,cAACW,EAAD,O,wBCDpBK,GARG,SAAC,GAAD,IAAGC,EAAH,EAAGA,SAAH,OAChB,qBAAK1B,UAAWC,KAAE0B,UAAlB,SAA8BD,K,qCCAjB,SAASE,GAAT,GAIX,IAHFF,EAGC,EAHDA,SAGC,IAFDG,kBAEC,MAFY,IAEZ,EADEC,EACF,mBACKpE,EAAaqC,YAAYP,EAAcC,eAC7C,OACE,cAAC,IAAD,2BAAWqC,GAAX,aACGpE,EAAagE,EAAW,cAAC,IAAD,CAAUtB,GAAIyB,O,8CCR9B,SAASE,GAAT,GAKX,IAJFL,EAIC,EAJDA,SAIC,IAHDM,kBAGC,aAFDH,kBAEC,MAFY,IAEZ,EADEC,EACF,mBAEKG,EADalC,YAAYP,EAAcC,gBACRuC,EACrC,OACE,cAAC,IAAD,2BAAWF,GAAX,aACGG,EAAiB,cAAC,IAAD,CAAU7B,GAAIyB,IAAiBH,KCJvD,IAAMQ,GAAWC,gBAAK,kBAAM,iCACtBC,GAAeD,gBAAK,kBAAM,uDAC1BE,GAAYF,gBAAK,kBAAM,uDACvBG,GAAeH,gBAAK,kBAAM,uDAEjB,SAASI,KACtB,IAAM7B,EAAWC,cACXd,EAAwBE,YAAYP,EAAcI,sBAMxD,OAJA4C,qBAAU,WACR9B,EAAS5E,iBACR,CAAC4E,IAGF,cAAC,GAAD,WACIb,GACA,qCACE,cAAC0B,GAAD,IAEA,cAAC,IAAD,UACE,eAAC,WAAD,CAAUkB,SAAU,2CAApB,UACE,cAACV,GAAD,CAAa1B,OAAK,EAACqC,KAAK,IAAxB,SACE,cAACR,GAAD,MAGF,cAACH,GAAD,CACE1B,OAAK,EACLqC,KAAK,YACLb,WAAW,YACXG,YAAU,EAJZ,SAME,cAACI,GAAD,MAGF,cAACL,GAAD,CACE1B,OAAK,EACLqC,KAAK,SACLb,WAAW,YACXG,YAAU,EAJZ,SAME,cAACK,GAAD,MAGF,cAACT,GAAD,CAAcc,KAAK,YAAYb,WAAW,SAA1C,SACE,cAACS,GAAD,gB,OC7ChBK,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAUhE,MAAOA,EAAjB,SACE,cAAC,IAAD,CAAa/B,QAAS,KAAMwC,UAAWA,EAAvC,SACE,cAAC,IAAD,UACE,cAACiD,GAAD,YAKRO,SAASC,eAAe,U,mBClB1BC,EAAOC,QAAU,CAAC,QAAU,4BAA4B,QAAU,4BAA4B,QAAU,4BAA4B,cAAgB,oC,gCCDpJ,wIAAO,IAAMC,EAAM,sBACNC,EAAS,kBACTC,EAAQ,yBACRC,EAAS,yB,mBCFtBL,EAAOC,QAAU,CAAC,KAAO,sBAAsB,WAAa,8B,mBCA5DD,EAAOC,QAAU,CAAC,MAAQ,wBAAwB,MAAQ,wBAAwB,WAAa,+B,gCCD/F,qDAGapG,EAAgByG,YAAaD,M,mBCF1CL,EAAOC,QAAU,CAAC,OAAS,yB,mBCA3BD,EAAOC,QAAU,CAAC,UAAY,+B,kLCGvB,SAAe5G,IAAtB,+B,4CAAO,8BAAAd,EAAA,sEACkBX,IAAMsB,IAAN,aADlB,uBACGT,EADH,EACGA,KADH,kBAGEA,GAHF,4C,sBAMA,SAAee,EAAtB,oC,4CAAO,WAA0Be,EAAMgG,GAAhC,iBAAAhI,EAAA,sEACkBX,IAAMY,KAAN,YAAwB,CAC7C+B,OACAgG,WAHG,uBACG9H,EADH,EACGA,KADH,kBAKEA,GALF,4C,sBAQA,SAAeiB,EAAtB,kC,4CAAO,WAA6BE,GAA7B,iBAAArB,EAAA,sEACkBX,IAAM4I,OAAN,oBAA0B5G,IAD5C,uBACGnB,EADH,EACGA,KADH,kBAEEA,GAFF,4C,sBAhBPb,IAAMC,SAASC,QAAU,8C,mBCEZuB,EAAgBjB,YAC3BgI,IAD2C,uCAE3C,WAAOK,EAAP,kBAAAlI,EAAA,6DAAiBG,EAAjB,EAAiBA,gBAAjB,kBAEiBgI,IAFjB,iGAIWhI,EAAgB,KAAMiI,UAJjC,yDAF2C,yDAWhCnH,EAAapB,YACxB8H,IADwC,uCAExC,mCAAA3H,EAAA,6DAASgC,EAAT,EAASA,KAAMgG,EAAf,EAAeA,OAAY7H,EAA3B,EAA2BA,gBAA3B,kBAEiBgI,EAAuBnG,EAAMgG,GAF9C,iGAIW7H,EAAgB,KAAMiI,UAJjC,yDAFwC,yDAW7BjH,EAAgBtB,YAC3B+H,IAD2C,uCAE3C,WAAOvG,EAAP,oBAAArB,EAAA,6DAAaG,EAAb,EAAaA,gBAAb,kBAE0BgI,EAA0B9G,GAFpD,cAEUgH,EAFV,yBAGWA,EAAQhH,IAHnB,yDAKWlB,EAAgB,KAAMiI,UALjC,yDAF2C,2D","file":"static/js/main.f62145f0.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = '';\r\n  },\r\n};\r\n\r\nexport const register = createAsyncThunk(\r\n  'auth/register',\r\n  async (credentials, thunkAPI) => {\r\n    try {\r\n      const { data } = await axios.post('/users/signup', credentials);\r\n      token.set(data.token);\r\n      return data;\r\n    } catch (err) {\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n  },\r\n);\r\n\r\nexport const logIn = createAsyncThunk(\r\n  'auth/login',\r\n  async (credentials, thunkAPI) => {\r\n    try {\r\n      const { data } = await axios.post('/users/login', credentials);\r\n      token.set(data.token);\r\n      return data;\r\n    } catch (err) {\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n  },\r\n);\r\n\r\nexport const logOut = createAsyncThunk('auth/logout', async (_, thunkAPI) => {\r\n  try {\r\n    await axios.post('/users/logout');\r\n    token.unset();\r\n  } catch (err) {\r\n    return thunkAPI.rejectWithValue();\r\n  }\r\n});\r\n\r\nexport const fetchCurrentUser = createAsyncThunk(\r\n  'auth/fetchCurrentUser',\r\n  async (_, thunkAPI) => {\r\n    try {\r\n      const persistedToken = thunkAPI.getState().auth.token;\r\n      token.set(persistedToken);\r\n      const { data } = await axios.get('/users/current');\r\n      return data;\r\n    } catch (err) {\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n  },\r\n);\r\n","import { combineReducers } from 'redux';\r\nimport { createReducer } from '@reduxjs/toolkit';\r\nimport { filterContact } from './contacts-actions';\r\nimport {\r\n  fetchContacts,\r\n  addContact,\r\n  deleteContact,\r\n} from './contacts-operations';\r\n\r\nconst contactsInitial = [];\r\n\r\nconst items = createReducer(contactsInitial, {\r\n  [fetchContacts.fulfilled]: (_, { payload }) => payload,\r\n\r\n  [addContact.fulfilled]: (state, { payload }) => [...state, payload],\r\n\r\n  [deleteContact.fulfilled]: (state, { payload }) =>\r\n    state.filter(({ id }) => id !== payload),\r\n});\r\n\r\nconst filter = createReducer('', {\r\n  [filterContact]: (_, { payload }) => payload,\r\n});\r\n\r\nconst loading = createReducer(false, {\r\n  [fetchContacts.pending]: () => true,\r\n  [fetchContacts.fulfilled]: () => false,\r\n  [fetchContacts.rejected]: () => false,\r\n\r\n  [addContact.pending]: () => true,\r\n  [addContact.fulfilled]: () => false,\r\n  [addContact.rejected]: () => false,\r\n\r\n  [deleteContact.pending]: () => true,\r\n  [deleteContact.fulfilled]: () => false,\r\n  [deleteContact.rejected]: () => false,\r\n});\r\n\r\nconst error = createReducer(null, {\r\n  [fetchContacts.rejected]: error => console.log(error),\r\n  [fetchContacts.pending]: () => null,\r\n  [addContact.rejected]: error => console.log(error),\r\n  [addContact.pending]: () => null,\r\n  [deleteContact.rejected]: error => console.log(error),\r\n  [deleteContact.pending]: () => null,\r\n});\r\n\r\nexport default combineReducers({\r\n  items,\r\n  filter,\r\n  loading,\r\n  error,\r\n});\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport { register, logIn, logOut, fetchCurrentUser } from './auth-operations';\r\n\r\nconst initialState = {\r\n  user: { name: null, email: null },\r\n  isLoader: false,\r\n  token: null,\r\n  isLoggedIn: false,\r\n  error: false,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  extraReducers: {\r\n    [register.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoader = false;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [register.pending](state) {\r\n      state.isLoader = true;\r\n      state.error = false;\r\n    },\r\n    [register.rejected](state) {\r\n      state = { ...initialState, error: true };\r\n    },\r\n    [logIn.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoader = false;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [logIn.pending](state) {\r\n      state.isLoader = true;\r\n      state.error = false;\r\n    },\r\n    [logIn.rejected](state) {\r\n      state = { ...initialState, error: true };\r\n    },\r\n    [logOut.fulfilled](state) {\r\n      state.user = { name: null, email: null };\r\n      state.token = null;\r\n      state.isLoggedIn = false;\r\n      state.isLoader = false;\r\n    },\r\n    [logOut.pending](state) {\r\n      state.error = false;\r\n    },\r\n    [logOut.rejected](state) {\r\n      state.error = true;\r\n      state.isLoader = true;\r\n    },\r\n    [fetchCurrentUser.fulfilled](state, action) {\r\n      state.user = { ...action.payload };\r\n      state.isLoggedIn = true;\r\n      state.isLoader = false;\r\n    },\r\n    [fetchCurrentUser.pending](state) {\r\n      state.error = false;\r\n      state.isLoader = true;\r\n    },\r\n    [fetchCurrentUser.rejected](state) {\r\n      state.error = true;\r\n      state.isLoader = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport default authSlice.reducer;\r\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\nimport contactsReducer from './contacts/contacts-reducer';\r\nimport authReducer from './auth/auth-reducer';\r\n\r\nconst middleware = [\r\n  ...getDefaultMiddleware({\r\n    serializableCheck: {\r\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n    },\r\n  }),\r\n];\r\n\r\nconst authPersistConfig = {\r\n  key: 'auth',\r\n  storage,\r\n  whitelist: ['token'],\r\n};\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    auth: persistReducer(authPersistConfig, authReducer),\r\n    contacts: contactsReducer,\r\n  },\r\n  middleware,\r\n  devTools: process.env.NODE_ENV === 'development',\r\n});\r\n\r\nexport const persistor = persistStore(store);\r\n","const getIsLoggedIn = state => state.auth.isLoggedIn;\r\nconst getLoading = state => state.auth.isLoader;\r\nconst getUsername = state => state.auth.user.name;\r\nconst getIsFetchingCurrent = state => state.auth.isFetchingCurrentUser;\r\n\r\nconst authSelectors = {\r\n  getIsLoggedIn,\r\n  getLoading,\r\n  getUsername,\r\n  getIsFetchingCurrent,\r\n};\r\nexport default authSelectors;\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport authSelectors from '../../redux/auth/auth-selectors';\r\nimport s from './Navigation.module.css';\r\n\r\nexport default function Navigation() {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <ul className={s.navList}>\r\n      <li className={s.navItem}>\r\n        <NavLink\r\n          to=\"/\"\r\n          exact\r\n          className={s.navLink}\r\n          activeClassName={s.navLinkActive}\r\n        >\r\n          HomePage\r\n        </NavLink>\r\n      </li>\r\n\r\n      {isLoggedIn && (\r\n        <li className={s.navItem}>\r\n          <NavLink\r\n            to=\"/contacts\"\r\n            exact\r\n            className={s.navLink}\r\n            activeClassName={s.navLinkActive}\r\n          >\r\n            Phonebook\r\n          </NavLink>\r\n        </li>\r\n      )}\r\n    </ul>\r\n  );\r\n}\r\n","import { useDispatch, useSelector } from 'react-redux';\r\nimport authSelectors from '../../redux/auth/auth-selectors';\r\nimport { logOut } from '../../redux/auth/auth-operations';\r\n\r\nimport Fab from '@material-ui/core/Fab';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport s from './UserMenu.module.css';\r\n\r\nexport default function UserMenu() {\r\n  const dispatch = useDispatch();\r\n  const name = useSelector(authSelectors.getUsername);\r\n\r\n  return (\r\n    <div className={s.thumb}>\r\n      <div className={s.titleThumb}>\r\n        <AccountCircleIcon />\r\n        <span className={s.title}>Welcome, {name}</span>\r\n      </div>\r\n      <Fab\r\n        variant=\"extended\"\r\n        size=\"small\"\r\n        type=\"button\"\r\n        onClick={() => dispatch(logOut())}\r\n      >\r\n        <ExitToAppIcon />\r\n        Log Out\r\n      </Fab>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport s from './AuthNav.module.css';\r\n\r\nexport default function AuthNav() {\r\n  return (\r\n    <div>\r\n      <NavLink\r\n        to=\"/register\"\r\n        exact\r\n        className={s.link}\r\n        activeClassName={s.activeLink}\r\n      >\r\n        Registration\r\n      </NavLink>\r\n      <NavLink\r\n        to=\"/login\"\r\n        exact\r\n        className={s.link}\r\n        activeClassName={s.activeLink}\r\n      >\r\n        Log In\r\n      </NavLink>\r\n    </div>\r\n  );\r\n}\r\n","import { useSelector } from 'react-redux';\r\nimport Navigation from '../Navigation';\r\nimport UserMenu from '../UserMenu';\r\nimport AuthNav from '../AuthNav';\r\nimport authSelectors from '../../redux/auth/auth-selectors';\r\nimport s from './AppBar.module.css';\r\n\r\nexport default function AppBar() {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <header className={s.header}>\r\n      <Navigation />\r\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n    </header>\r\n  );\r\n}\r\n","import PropTypes from 'prop-types';\r\nimport s from './Container.module.css';\r\n\r\nconst Container = ({ children }) => (\r\n  <div className={s.container}>{children}</div>\r\n);\r\n\r\nContainer.propTypes = {\r\n  children: PropTypes.node,\r\n};\r\n\r\nexport default Container;\r\n","import { useSelector } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport authSelectors from '../redux/auth/auth-selectors';\r\n\r\nexport default function PrivateRoute({\r\n  children,\r\n  redirectTo = '/',\r\n  ...routeProps\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <Route {...routeProps}>\r\n      {isLoggedIn ? children : <Redirect to={redirectTo} />}\r\n    </Route>\r\n  );\r\n}\r\n","import { useSelector } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport authSelectors from '../redux/auth/auth-selectors';\r\n\r\nexport default function PublicRoute({\r\n  children,\r\n  restricted = false,\r\n  redirectTo = '/',\r\n  ...routeProps\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  const shouldRedirect = isLoggedIn && restricted;\r\n  return (\r\n    <Route {...routeProps}>\r\n      {shouldRedirect ? <Redirect to={redirectTo} /> : children}\r\n    </Route>\r\n  );\r\n}\r\n","import { useEffect, Suspense, lazy } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Switch } from 'react-router-dom';\nimport AppBar from '../AppBar';\nimport Container from '../Container';\nimport PrivateRoute from '../PrivateRoute';\nimport PublicRoute from '../PublicRoute';\nimport { fetchCurrentUser } from '../../redux/auth/auth-operations';\nimport authSelectors from '../../redux/auth/auth-selectors';\n\nconst HomePage = lazy(() => import('../../pages/HomePage'));\nconst RegisterPage = lazy(() => import('../../pages/RegisterPage'));\nconst LoginPage = lazy(() => import('../../pages/LoginPage'));\nconst ContactsPage = lazy(() => import('../../pages/ContactsPage'));\n\nexport default function App() {\n  const dispatch = useDispatch();\n  const isFetchingCurrentUser = useSelector(authSelectors.getIsFetchingCurrent);\n\n  useEffect(() => {\n    dispatch(fetchCurrentUser());\n  }, [dispatch]);\n\n  return (\n    <Container>\n      {!isFetchingCurrentUser && (\n        <>\n          <AppBar />\n\n          <Switch>\n            <Suspense fallback={<p>Loading...</p>}>\n              <PublicRoute exact path=\"/\">\n                <HomePage />\n              </PublicRoute>\n\n              <PublicRoute\n                exact\n                path=\"/register\"\n                redirectTo=\"/contacts\"\n                restricted\n              >\n                <RegisterPage />\n              </PublicRoute>\n\n              <PublicRoute\n                exact\n                path=\"/login\"\n                redirectTo=\"/contacts\"\n                restricted\n              >\n                <LoginPage />\n              </PublicRoute>\n\n              <PrivateRoute path=\"/contacts\" redirectTo=\"/login\">\n                <ContactsPage />\n              </PrivateRoute>\n            </Suspense>\n          </Switch>\n        </>\n      )}\n    </Container>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport { store, persistor } from './redux/store';\nimport App from './components/App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navList\":\"Navigation_navList__13FzV\",\"navItem\":\"Navigation_navItem__1oRfu\",\"navLink\":\"Navigation_navLink__GbRcs\",\"navLinkActive\":\"Navigation_navLinkActive__3QGXq\"};","export const ADD = 'contacts/AddContact';\r\nexport const DELETE = 'contacts/Delete';\r\nexport const FETCH = 'contacts/FetchContacts';\r\nexport const FILTER = 'contacts/changeFilter';\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"AuthNav_link__1Cmth\",\"activeLink\":\"AuthNav_activeLink__2May1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"thumb\":\"UserMenu_thumb__3U71z\",\"title\":\"UserMenu_title__3nu8K\",\"titleThumb\":\"UserMenu_titleThumb__2yE5C\"};","import { createAction } from '@reduxjs/toolkit';\r\nimport { FILTER } from './contacts-types';\r\n\r\nexport const filterContact = createAction(FILTER);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppBar_header__3sYSn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__19hmp\"};","import axios from 'axios';\r\n\r\naxios.defaults.baseURL = 'https://61f1876a072f86001749f26d.mockapi.io';\r\n\r\nexport async function fetchContacts() {\r\n  const { data } = await axios.get(`/contacts`);\r\n\r\n  return data;\r\n}\r\n\r\nexport async function addContact(name, number) {\r\n  const { data } = await axios.post(`/contacts`, {\r\n    name,\r\n    number,\r\n  });\r\n  return data;\r\n}\r\n\r\nexport async function deleteContact(id) {\r\n  const { data } = await axios.delete(`/contacts/${id}`);\r\n  return data;\r\n}\r\n","import * as contactsAPI from '../../services/api';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { FETCH, ADD, DELETE } from './contacts-types';\r\n\r\nexport const fetchContacts = createAsyncThunk(\r\n  FETCH,\r\n  async (_value, { rejectWithValue }) => {\r\n    try {\r\n      return await contactsAPI.fetchContacts();\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  },\r\n);\r\n\r\nexport const addContact = createAsyncThunk(\r\n  ADD,\r\n  async ({ name, number }, { rejectWithValue }) => {\r\n    try {\r\n      return await contactsAPI.addContact(name, number);\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  },\r\n);\r\n\r\nexport const deleteContact = createAsyncThunk(\r\n  DELETE,\r\n  async (id, { rejectWithValue }) => {\r\n    try {\r\n      const contact = await contactsAPI.deleteContact(id);\r\n      return contact.id;\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  },\r\n);\r\n"],"sourceRoot":""}